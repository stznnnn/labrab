1. Что такое LACP и для чего он используется?
LACP (Link Aggregation Control Protocol) — это протокол, который позволяет объединять несколько физических каналов Ethernet в один логический (Aggregated Port-Channel) для:
•	Увеличения пропускной способности (суммирование скорости всех линков).
•	Обеспечения отказоустойчивости (если один канал отвалится, трафик пойдет через оставшиеся).
•	Балансировки нагрузки (трафик распределяется между линками).
LACP является частью стандарта IEEE 802.3ad (позже 802.1AX) и работает между двумя устройствами (коммутаторами или серверами).
________________________________________
2. Процесс формирования LACP-агрегированных каналов
1.	Обнаружение совместимых портов:
o	Устройства обмениваются LACP-пакетами (LACPDU) для определения возможных линков.
o	Пакеты содержат:
	System Priority (приоритет устройства).
	Port Priority (приоритет порта).
	Key (Aggregator ID) – идентификатор агрегированной группы.
2.	Выбор активных и резервных портов:
o	Если количество линков больше, чем поддерживает агрегирование (обычно до 8), LACP выбирает активные порты (Active), остальные становятся резервными (Standby).
3.	Создание Port-Channel:
o	Совместимые порты объединяются в логический канал.
o	Трафик распределяется по алгоритму (например, src-dst MAC, src-dst IP).
________________________________________
3. Преимущества LACP перед другими методами агрегации
Метод	Преимущества LACP
Статическая агрегация (On)	LACP автоматически проверяет целостность каналов и перестраивается при сбоях.
PAGP (Cisco Proprietary)	LACP — стандартный протокол (работает между разными вендорами).
Без агрегации	LACP обеспечивает отказоустойчивость и балансировку нагрузки.
________________________________________
4. Состояния портов LACP и их значение
Состояние	Описание
Active	Порт активно участвует в LACP и отправляет LACPDU.
Passive	Порт отвечает на LACPDU, но не инициирует переговоры (ждет Active от соседа).
Bundle (Up)	Порт успешно объединен в Port-Channel.
Standby	Порт совместим, но не используется из-за ограничения на кол-во активных.
Disabled	LACP не настроен или порт выключен.
________________________________________
5. Настройка LACP между SW1 и SW2 (Cisco Catalyst 2960)
Топология:
•	SW1:
o	FastEthernet0/1 → FastEthernet0/1 (SW2)
o	FastEthernet0/2 → FastEthernet0/2 (SW2)
•	SW2:
o	Аналогично.
Конфигурация:
На SW1:
bash
Copy
Download
enable
configure terminal
interface range FastEthernet0/1-2
  channel-group 1 mode active  # Включаем LACP в активном режиме
  exit
interface Port-channel 1
  switchport mode trunk       # Если нужно транковое соединение
  exit
На SW2:
bash
Copy
Download
enable
configure terminal
interface range FastEthernet0/1-2
  channel-group 1 mode active  # Или `mode passive` (если SW1 активный)
  exit
interface Port-channel 1
  switchport mode trunk
  exit


